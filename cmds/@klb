#! /usr/bin/env autox

import os
import string
from AUTOclui import *
import parseBandS

# This is the Python syntax for making a script runable    
if __name__ == '__main__':
    if len(sys.argv) > 1:
        codes=['BP','LP','HB','PD','TR','EP','MX','UZ','RG']
        code=sys.argv[1]
        if code[0] == '-':
            codes.remove(string.upper(code[1:3]))
            n=1
        else:
            codes=['UZ','RG']
            n=0
    if len(sys.argv) == n+3:
        changedb='b.'+sys.argv[n+2]
        changeds='s.'+sys.argv[n+2]
        bs=bt(sys.argv[n+1])
    else:
        if len(sys.argv) == n+2:
            changedb='b.'+sys.argv[n+1]
            changeds='s.'+sys.argv[n+1]
        else:
            changedb='fort.7'
            changeds='fort.8'
        origb=changedb+'~'
        origs=changeds+'~'
        try:
            os.remove(origb)
        except:
            pass
        try:
            os.remove(origs)
        except:
            pass
        os.rename(changedb,origb)
        os.rename(changeds,origs)
        if len(sys.argv) == n+2:
            bs=bt(sys.argv[n+1]+'~')
        else:
            bs=parseBandS.parseBandS('fort.7~','fort.8~')
    for type in codes:
        bs.deleteLabel(splabs(bs.solution,type),keepTY=1)
    bs.writeFilename(changedb,changeds)
    print " @klb: Rewriting finished."
